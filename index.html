<html>

<head>
    <script src="keymaster.js"></script>

    <script>

    class Snake {
        constructor() {
            this.pos = [0,0];
            this.length = 0;
            this.positions = [];
        }

        update(key) {
            this.move(key)
        }

        show() {
            
        }

        move(key) {
            if (key === 'up') {
                this.pos[1] -= 1;
            } else if (key === 'down') {
                this.pos[1] += 1;
            } else if (key === 'left') {
                this.pos[0] -= 1;
            } else {
                this.pos[0] += 1;
            }

        }
    }

    last_key = "up"
    time_between_frames = 1
    time_since_last = 0
    function loop() {

        for (let d in ["up", "down", "left", "right"]) {
            if (key.isPressed(d)) {
                last_key = "d";
            }
        }

        t = get_frame_change()
        if (time_since_last >= time_between_frames) {
            runGame();
            time_since_last = 0;
        }
        requestAnimationFrame(loop);
    }

    let last_time = 0    
    function get_frame_change() {
        t = performance.now() - last_time;
        last_time = performance.now();
        return t
    }

    function init() {
        let canvas = document.getElementById('tutorial');
        ctx = canvas.getContext('2d');
        ctx.canvas.width = window.innerWidth;
        ctx.canvas.height = window.innerHeight;

        loop();
 
    }

    function draw() {
        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
        ctx.beginPath()
        width = get_dt() * 10000;
        ctx.rect(20, 100, width, 20);
        ctx.closePath()
        ctx.strokeStyle='#0000ff'
        ctx.lineWidth = 10
        ctx.stroke();
        ctx.fillStyle='#00ff00'
        ctx.fill()
        
    }
    </script>

</head>
<body onload="init();">
<canvas id="tutorial"></canvas>
</body>

</html>